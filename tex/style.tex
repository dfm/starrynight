% Packages
\usepackage{amsmath}
\usepackage{fontspec}
\usepackage{unicode-math}
\usepackage{xifthen}
\usepackage{stackengine}

% Integrals
\newcommand{\vint}[2]{\int\limits_{#1}#2\dd\varphi}
\newcommand{\dd}{\ensuremath{\text{d}}}

% Special functions
\newcommand{\sgn}{{\text{sgn}}}
\newcommand{\atantwo}{{\text{arctan2}}}

% Misc. macros
\newcommand{\STARRYQUADPOINTS}{100\xspace}

% Basis vectors
\newcommand{\bg}{\ensuremath{\tilde{\mathbf{g}}}}
\newcommand{\bp}{\ensuremath{\tilde{\mathbf{p}}}}
\newcommand{\by}{\ensuremath{\tilde{\mathbf{y}}}}

% Cartesian unit vectors
\newcommand{\xhat}{\ensuremath{\pmb{\hat{x}}}\xspace}
\newcommand{\yhat}{\ensuremath{\pmb{\hat{y}}}\xspace}
\newcommand{\zhat}{\ensuremath{\pmb{\hat{z}}}\xspace}

% Primitive integrals
\newcommand{\sTe}{\ensuremath{\mathbf{s}^\top}}
\newcommand{\rTe}{\ensuremath{\mathbf{r}^\top}}
\newcommand{\sT}{\ensuremath{\mathbbb{s}^\top}}
\newcommand{\rT}{\ensuremath{\mathbbb{r}^\top}}
\newcommand{\pT}{\ensuremath{\mathbbb{p}^\top}}
\newcommand{\tT}{\ensuremath{\mathbbb{t}^\top}}
\newcommand{\qT}{\ensuremath{\mathbbb{q}^\top}}

% Helper integrals
\newcommand{\iI}{\ensuremath{\mathbb{i}}}
\newcommand{\iJ}{\ensuremath{\mathbb{j}}}
\newcommand{\iU}{\ensuremath{\mathbb{u}}}
\newcommand{\iW}{\ensuremath{\mathbb{w}}}
\newcommand{\iH}{\ensuremath{\mathbb{h}}}
\newcommand{\viI}{\ensuremath{\mathbbb{i}}}
\newcommand{\viJ}{\ensuremath{\mathbbb{j}}}
\newcommand{\viU}{\ensuremath{\mathbbb{u}}}
\newcommand{\viW}{\ensuremath{\mathbbb{w}}}
\newcommand{\viH}{\ensuremath{\mathbbb{h}}}

% Elliptic integrals
\newcommand{\DE}{\Delta \mathbbb{E}(k^2, \vkappa)}
\newcommand{\DF}{\Delta \mathbbb{F}(k^2, \vkappa)}

% Angles
\newcommand{\vkappa}{\pmb{\kappa}}
\newcommand{\vlambda}{\pmb{\lambda}}
\newcommand{\vxi}{\pmb{\xi}}
\newcommand{\coshalfkap}[1][]{%
    \ifthenelse{%
        \equal{#1}{}
    }{
        \cos\left(\frac{\vkappa}{2}\right)
    }{
        \cos^{#1}\left(\frac{\vkappa}{2}\right)
    }}
\newcommand{\sinhalfkap}[1][]{%
    \ifthenelse{%
        \equal{#1}{}
    }{
        \sin\left(\frac{\vkappa}{2}\right)
    }{
        \sin^{#1}\left(\frac{\vkappa}{2}\right)
    }}

% Other
\newcommand{\vmax}{{v_\text{max}}}